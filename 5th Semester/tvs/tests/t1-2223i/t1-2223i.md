# 1
```
Considere o seguinte programa fonte, compilado para o executável ex1:

int main(int argc, char * argv[]) {
    int base = atoi(argv[1]); // converte string com dígitos para inteiro
    for (int i = 0; i < 4; ++i) printf("%d\n", base + i);
    return 0;
}
```

## a
```
Indique, justificando, o que é afixado no standard output e qual o conteúdo dos ficheiros output*.txt, com a execução de cada uma das seguintes linhas de comandos pelo shell:

    ex1 18 | grep 1 > output1.txt ← também para a alínea b
    ex1 77 | tee output2.txt | grep 8
```

```

```

## b
```
Escreva um programa em C que execute especificamente a primeira linha de comandos indicada na alínea anterior, usando diretamente a API POSIX para criar/abrir ficheiro(s), lançar os processos necessários, ligá-los da mesma forma que o shell e aguardar pela sua conclusão.
```

```
```

# 2
```
Durante a tradução de um endereço virtual por um processador x86-64 foram consultadas quatro tabelas de páginas, pela ordem indicada, nos seguintes índices:
– 1º nível (PML4) índice 17 (PTE com bit R/W = 1)
– 2º nível (PDP) índice 1 (PTE com bit R/W = 1)
– 3º nível (PD) índice 9 (PTE com bit R/W = 0)
– 4º nível (PT) índice 3 (PTE com bit R/W = 1)
```

## a
```
Qual é o endereço virtual mais baixo que poderia estar a ser traduzido? Apresente os cálculos.
```

```
```

## b
```
A tabela de 4º nível (PT) só é referida pelo índice 9 da tabela de 3º nível (PD) indicada. Todas as suas entradas estão preenchidas (bit P = 1) e mapeadas para endereços físicos diferentes. Um quarto (¼) das entradas têm o bit R/W = 0 e três quartos (¾) têm R/W = 1. Em quantos endereços virtuais cobertos por esta page table (PT) é possível ler, mas proibido escrever? Justifique.
```

```
```

# 3
```
Considere o seguinte código fonte de uma biblioteca (ficheiro com extensão .so ou shared object):

const int BASE[] = {0,11,22,33};
int accum = 1;
int func(int idx) { accum += idx; return BASE[idx%4] + accum; }
```

## a
```
Tendo em conta apenas o código apresentado, que alterações se pode prever que terá o espaço de endereçamento de um processo que carregue esta biblioteca com dlopen?
```

```
```

## b
```
Se, simultaneamente, quatro processos distintos carregarem esta biblioteca e executarem pelo menos uma vez a função func, indique, justificando, qual espera que seja o proportional set size (Pss) das regiões relevantes relativas à biblioteca logo após os retornos de func?
```

```
```

# 4
```
No âmbito dos processadores x86-64, o que são exceções e que relação têm com níveis de privilégio? Na sua resposta inclua pelo menos dois exemplos de ocorrências de exceções, um para um caso efetivo de erro e outro para uma situação que, apesar de ser tratada como exceção pelo processador, pode não corresponder a um erro, do ponto de vista do sistema operativo.
```

```
```

# 5
```
Em cada um dos casos seguintes, qual é o backing storage para as páginas físicas de memória referidas?
```

## a
```
Página pertencente ao mapeamento da secção de código (.text) de um ficheiro executável.
```

```
```

## b
```
Página modificada, pertencente ao mapeamento da secção de dados inicializados de um executável.
```

```
```

## c
```
Página modificada, pertencente ao mapeamento da secção de dados não-inicializados de uma biblioteca (ficheiro com extensão .so ou shared object).
```

```
```

## d
```
Página não modificada, pertencente ao mapeamento PRIVATE de um ficheiro comum.
```

```
```

## e
```
Página não modificada, pertencente ao mapeamento de uma região anónima partilhada
(MAP_SHARED | MAP_ANONYMOUS).
```

```
```